<div class="dashboard-container" [@fadeInUp]>
  <!-- Welcome Banner -->
  <section class="welcome-banner">
    <div class="welcome-content">
      <h1>Welcome to Your Restaurant Dashboard</h1>
      <p>Manage your restaurant operations efficiently</p>
      <div class="current-stats">
        <div class="stat-item">
          <span class="stat-value">{{todaysOrders===null ? 0 : todaysOrders}}</span>
          <span class="stat-label">Today's Orders</span>
        </div>
        <div class="stat-item">
          <span class="stat-value">{{activeUsers}}</span>
          <span class="stat-label">Active Users</span>
        </div>
        <div class="stat-item">
          <span class="stat-value">{{availableItems}}</span>
          <span class="stat-label">Menu Items</span>
        </div>
      </div>
    </div>
    <div class="welcome-image">
      <img src="/assets/Images/ResturantDashboard.jpg" alt="Restaurant Dashboard">
    </div>
  </section>

  <!-- Stats Grid -->
  <section class="stats-grid">
    <div class="stat-card" *ngFor="let stat of stats">
      <div class="stat-icon" [style.background]="stat.color">
        <i [class]="stat.icon"></i>
      </div>
      <div class="stat-info">
        <h3 [class.wrong]="stat.value===null">{{stat.value!==null ? stat.value: 'something wrong happend!'}}</h3>
        <p>{{stat.title}}</p>
      </div>
    </div>
  </section>

  <!-- Discount Code Section -->
  <section class="discount-section">
    <div class="discount-header">
      <h3><i class="fas fa-tag"></i> Discount Code</h3>
    </div>

    <div *ngIf="discountCode; else noCodeTemplate">
      <div class="current-code">
        <div class="code-text">{{discountCode}}</div>
        <div class="code-actions">
          <button class="code-btn btn-delete" (click)="DeleteDiscountCode()">
            <i class="fas fa-trash"></i> Delete
          </button>
          <button class="code-btn btn-change" (click)="showInput = true">
            <i class="fas fa-edit"></i> Change
          </button>
        </div>
      </div>
    </div>

    <ng-template #noCodeTemplate>
      <div class="no-code-message">
        <i class="fas fa-tag"></i>
        <p>There is no current discount code</p>
      </div>
    </ng-template>

    <div [@fadeIn] class="code-form" *ngIf="!discountCode || showInput">
      <form #myForm="ngForm" (ngSubmit)="AddDiscountCode(newDiscountCode)">
        <div class="form-group" >
          <label for="code">New Discount Code</label>
          <input
            type="text"
            id="code"
            [(ngModel)]="newDiscountCode"
            name="discountCode"
            placeholder="Enter discount code"
            required>
          <div class="error-message" *ngIf="!newDiscountCode && myForm.submitted">
            <i class="fas fa-exclamation-circle"></i> Please enter a discount code
          </div>
        </div>
        <button type="submit" class="submit-btn">
          <i class="fas fa-plus"></i> Add Discount Code
        </button>
      </form>
    </div>
  </section>

  <!-- Content Row -->
  <section class="content-row">
    <div class="recent-orders">
      <div class="section-header">
        <h2>Recent Orders</h2>
        <a routerLink="/AdminNavigation/Orders">View All</a>
      </div>
      <div class="orders-list">
        <div class="fs-1 mt-2 text-center text-muted fw-bold" *ngIf="recentOrders.length===0">no recent orders</div>
        <div class="order-item" *ngFor="let order of recentOrders">
          <div class="order-info">
            <span class="order-id">#{{order.id}}</span>
            <span class="order-time">{{order.creationDate | date:'shortTime'}}</span>
          </div>
          <div class="order-details">
            <span class="order-customer">{{order.customerName}}</span>
            <span class="order-amount">{{order.netPrice | currency}}</span>
          </div>
          <div class="order-status" [class]="'status-' + order.orderStatus">
            {{order.orderStatus | titlecase}}
          </div>
        </div>
      </div>
    </div>

    <div class="quick-actions">
      <div class="section-header">
        <h2>Quick Actions</h2>
      </div>
      <div class="action-buttons">
        <button routerLink="/AdminNavigation/AddItem" class="action-btn">
          <i class="fas fa-utensils"></i>
          <span>Add Menu Item</span>
        </button>
        <button routerLink="/AdminNavigation/AddMeal" class="action-btn">
          <i class="fas fa-hamburger"></i>
          <span>Create New Meal</span>
        </button>
        <button routerLink="/AdminNavigation/AddUser" class="action-btn">
          <i class="fas fa-user-plus"></i>
          <span>Add New User</span>
        </button>
        <button routerLink="/AdminNavigation/Categories" class="action-btn">
          <i class="fas fa-tags"></i>
          <span>Manage Categories</span>
        </button>
      </div>
    </div>
  </section>
</div>
